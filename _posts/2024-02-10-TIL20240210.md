---
title: TIL 20240210
author: rugii913
date: 2024-02-10 11:40:00 +0900
categories: [TIL, 2024년 2월]
tags: [TIL]
render_with_liquid: false
---

### Kotlin 코딩 테스트 관련
- x

---

### 과제 관련

- x

---


### DDIA

#### 4장

---

### Docker + CI/CD 강의

#### 5주차 이어서

#### Docker network

#### Docker image 고급

#### Container 가상화

---

### JPA 심화 강의 이어서

#### JPA, QueryDSL 심화
- 목표
  - ORM이 왜 필요한지에 대한 맥락을 이해
  - JPA 내부 동작 방식에 대해 이해
  - JPA, QueryDSL을 현업에서 활용하는 방식 경험
  - JPA, QueryDSL의 유용한 기능 살펴보기
  - JPA, QueryDSL Projection 사용
  - 새로운 ORM Exposed 소개

#### 7. JPA, QueryDSL 심화편을 마치며
- JPA, QueryDSL을 사용하면서 꼭 실천해야하는 습관
  - **실제로 DB에 날라가는 SQL 쿼리문을 직접 확인하자**
  - spring.jpa.properties.hibernate:show_sql=true
  - 예상치 못한 SQL 쿼리는 성능문제를 포함한 다양한 문제를 야기하는 원인이 된다.
  - 더 나아가 해당 SQL 쿼리의 실행 계획이나 인덱스를 확인하는 등 쿼리 자체에 대한 학습도 진행하면 좋을 것
- 새로운 ORM Exposed 소개 - Kotlin과 호환성 좋음, JPA의 몇 가지 문제점 해결

#### JPA, QueryDSL 테스트 코드 작성하기
- 목표
  - 테스트 코드를 작성해야하는 이유 알아보기
  - 단위 테스트, 통합 테스트 이해
  - @DataJpaTest 를 이용해 단위 테스트, 통합 테스트 코드를 작성

#### 8. 테스트 코드는 왜 작성해야할까?
- 테스트: 해당 소프트웨어가 내가 기대한 대로 잘 동작하는지 확인하는 과정(수동 테스트 포함)
  - 테스트 코드를 통해 테스트를 자동화하여 테스트 시간을 줄이자.
- 테스트 코드를 작성하여 자동 테스트 시 장점 - 구글링으로 찾아보면 아주 많다...
  - 테스트를 자주 할 수 있음 - CI/CD 파이프라인에 테스트 코드 실행을 자동화하도록 구성할 수도 있음
  - 리팩토링 시 안정감
  - 소프트웨어 결함 조기 발견
  - 테스트 코드 작성을 통해 올바른 설계에 대한 고민 (ex.) 생성자 주입 방식
- FIRST 원칙: 테스트 코드를 작성할 때 지켜야하는 원칙 예시
  - Fast: 테스트 코드는 빠르게 실행돼야 한다.
  - Isolated: 테스트는 독립적이어야 한다. 즉 다른 테스트나 외부 시스템을 의존하면 안 된다.
    - (ex.) 테스트 대상 코드에 카카오 시스템을 의존하는 코드가 있을 때 이 의존성을 제거하지 못하면 카카오 서버의 상태가 내 테스트 코드 결과에 영향을 준다.
  - Repeatable: 테스트는 반복 실행해도 동일한 결과여야 한다.
    - (ex.) 테스트 대상 코드에 LocalDateTime.now()와 같은 코드를 사용하면 실행 시각에 따라 실패할지도 모른다.
  - Self-Validating: 테스트는 스스로 검증되어야 한다. 테스트 결과를 검증하기 위해 별도 리소스가 들어가서는 안 된다.
    - (ex.) 사용자가 직접 테스트 결과를 눈으로 확인하는 작업이 필요해서는 안 된다.
  - Timely: 테스트 코드는 가능한 빨리 작성되어야 한다.
- 이 강의에서는 JPA, QueryDSL을 사용하는 코드에 대해 단위 테스트, 통합 테스트를 작성하는 가이드에 대해 소개
  - 테스트 종류 등은 앞선 심화 강의 자료 참고할 것

#### 9. JPA, QueryDSL 단위 테스트, 통합 테스트 간략히 소개하기
- 
